<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NUCC Trip Attendance Sheet</title>

  <link rel="stylesheet" href="trip_attendance_sheet.css" />

</head>

<body>
  <div class="tutorial-overlay is-hidden" id="tutorial-overlay" role="dialog" aria-modal="true"
    aria-labelledby="tutorial-title">
    <div class="tutorial-content">
      <button type="button" class="tutorial-close" id="tutorial-close" aria-label="Close tutorial">
        &times;
      </button>
      <h2 id="tutorial-title">Welcome to the NUCC Trip Attendance Sheet</h2>
      <p>
        This dashboard helps you capture who attended the outing, record essential
        trip logistics, and track costs. As the trip leader, please ensure every
        participant is listed, expenses are allocated, and banking details are
        confirmed before submitting the sheet.
      </p>
      <video class="tutorial-video" id="tutorial-video" controls preload="metadata">
        <source src="tutorial.mp4" type="video/mp4" />
        Your browser does not support the tutorial video.
      </video>
    </div>
  </div>

  <div class="top-section">
    <div class="top-section-left">
      <div class="header-row">
        <img src="banner.png" alt="NUCC banner" />
        <h1>Trip Attendance Sheet</h1>
      </div>

      <table class="meta-table">
        <tbody>
          <tr>
            <th scope="row">Date</th>
            <td>
              <input type="date" id="trip-date" title="Starting date of the trip." />
            </td>
            <th scope="row">Location</th>
            <td>
              <input type="text" id="trip-location"
                title="Use a short, clear name for where the trip took place — this will be used for tagging in transactions (e.g. Tuglow, Yagby)." />
            </td>
          </tr>
          <tr>
            <th scope="row">Trip Leader</th>
            <td>
              <input type="text" id="trip-leader" list="trip-leader-options"
                title="That’s you! The main organizer or leader of the trip." />
            </td>
            <th scope="row">Clerk</th>
            <td>
              <input type="text" id="clerk" list="trip-leader-options"
                title="The person responsible for handling payments and reimbursements (typically a committee member with access to the club bank account, e.g. the Treasurer)." />
            </td>
          </tr>
        </tbody>
      </table>

      <div class="expense-toggle-group" role="group" aria-label="Expense Columns">
        <label
          title="Check this if any members hired club gear for personal use (e.g. SRT kit, overalls, helmet, etc.).">
          <input type="checkbox" data-expense-key="personal-gear" checked />
          Personal Gear
        </label>
        <label title="Check this if any club gear was used collectively by the group (e.g. static ropes for rigging).">
          <input type="checkbox" data-expense-key="shared-gear" checked />
          Shared Gear
        </label>
        <label title="Check this if any members provided transport and fuel was consumed for the trip.">
          <input type="checkbox" data-expense-key="petrol" checked />
          Petrol
        </label>
        <label title="A handy toggle to check or uncheck all fields in the Used Shared Gear? column at once.">
          <input type="checkbox" id="shared-gear-master-toggle" />
          Shared Gear (All)
        </label>
      </div>

      <div class="base-expense-inputs">
        <label for="personal-gear-rate">
          Personal Gear per person ($)
          <input type="number" id="personal-gear-rate" step="0.01" value="5" />
        </label>
        <label for="shared-gear-rate">
          Shared Gear per person ($)
          <input type="number" id="shared-gear-rate" step="0.01" value="5" />
        </label>
      </div>

      <div class="controls">
        <button class="control-button" type="button" id="add-row" title="Add a new row to the members table.">
          Add Row
        </button>
        <button class="control-button" type="button" id="remove-row"
          title="Remove the last row from the members table.">
          Remove Row
        </button>
        <button class="control-button" type="button" id="add-expense"
          title="Add a new expense category (pair of columns: Expense Name and Inc?). Use this for any additional shared costs not already included — e.g. Camping fees or Park entry tickets.">
          Add Expense
        </button>
        <button class="control-button" type="button" id="remove-expense"
          title="Remove the last added expense category from the table.">
          Remove Expense
        </button>
        <button class="control-button" type="button" id="save-json"
          title="Download this form as a JSON file for safekeeping or later reuse.">
          Save JSON
        </button>
        <button class="control-button" type="button" id="load-json"
          title="Load a previously saved Trip Attendance JSON file.">
          Load JSON
        </button>
        <button class="control-button" type="button" id="summarise-button"
          title="Generate a summary page showing the accounting breakdown for the trip — suitable for sharing with participants and storing in the NUCC Google Drive “Trip Sheets” folder.">
          Summarise
        </button>
      </div>
    </div>
    <div class="top-section-right">
      <div class="top-section-right-inner">
        <div class="banking-info">
          <img src="banking_logo.png" alt="Banking logo" class="banking-logo" />
          <div class="banking-details" id="banking-details" aria-live="polite"></div>
        </div>
        <img src="taxminer.png" alt="Tax Miner graphic" class="miner-image" />
      </div>
    </div>
  </div>

  <p id="duplicate-name-warning" class="warning-message" role="alert" aria-live="polite" hidden></p>

  <table class="attendance-table" id="attendance-table">
    <thead>
      <tr id="attendance-header">
        <th>Name</th>
      </tr>
    </thead>
    <tbody id="attendance-body"></tbody>
    <tfoot id="attendance-foot"></tfoot>
  </table>

  <input type="file" id="load-json-input" accept=".json,application/json" style="position: absolute; left: -10000px;"
    aria-hidden="true" />

  <script src="trip_attendance_sheet.js"></script>


</body>

</html>
